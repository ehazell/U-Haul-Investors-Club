!function(t,e,i,n){"use strict";Foundation.libs.forms={name:"forms",version:"4.3.1",cache:{},settings:{disable_class:"no-custom",last_combo:null},init:function(e,i,n){return"object"==typeof i&&t.extend(!0,this.settings,i),"string"!=typeof i?(this.settings.init||this.events(),this.assemble(),this.settings.init):this[i].call(this,n)},assemble:function(){t('form.custom input[type="radio"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),t('form.custom input[type="checkbox"]',t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).each(this.append_custom_markup),t("form.custom select",t(this.scope)).not('[data-customforms="disabled"]').not("."+this.settings.disable_class).not("[multiple=multiple]").each(this.append_custom_select)},events:function(){var n=this;t(this.scope).on("click.fndtn.forms","form.custom span.custom.checkbox",function(e){e.preventDefault(),e.stopPropagation(),n.toggle_checkbox(t(this))}).on("click.fndtn.forms","form.custom span.custom.radio",function(e){e.preventDefault(),e.stopPropagation(),n.toggle_radio(t(this))}).on("change.fndtn.forms","form.custom select",function(e,i){t(this).is('[data-customforms="disabled"]')||n.refresh_custom_select(t(this),i)}).on("click.fndtn.forms","form.custom label",function(e){if(t(e.target).is("label")){var i,s,a=t("#"+n.escape(t(this).attr("for"))).not('[data-customforms="disabled"]');0!==a.length&&("checkbox"===a.attr("type")?(e.preventDefault(),i=t(this).find("span.custom.checkbox"),0===i.length&&(i=a.add(this).siblings("span.custom.checkbox").first()),n.toggle_checkbox(i)):"radio"===a.attr("type")&&(e.preventDefault(),s=t(this).find("span.custom.radio"),0===s.length&&(s=a.add(this).siblings("span.custom.radio").first()),n.toggle_radio(s)))}}).on("mousedown.fndtn.forms","form.custom div.custom.dropdown",function(){return!1}).on("click.fndtn.forms","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(e){var i=t(this),a=i.closest("div.custom.dropdown"),o=s(a,"select");return a.hasClass("open")||t(n.scope).trigger("click"),e.preventDefault(),!1===o.is(":disabled")?(a.toggleClass("open"),a.hasClass("open")?t(n.scope).on("click.fndtn.forms.customdropdown",function(){a.removeClass("open"),t(n.scope).off(".fndtn.forms.customdropdown")}):t(n.scope).on(".fndtn.forms.customdropdown"),!1):void 0}).on("click.fndtn.forms touchend.fndtn.forms","form.custom div.custom.dropdown li",function(e){var n=t(this),a=n.closest("div.custom.dropdown"),o=s(a,"select"),r=0;if(e.preventDefault(),e.stopPropagation(),!t(this).hasClass("disabled")){t("div.dropdown").not(a).removeClass("open");var d=n.closest("ul").find("li.selected");if(d.removeClass("selected"),n.addClass("selected"),a.removeClass("open").find("a.current").text(n.text()),n.closest("ul").find("li").each(function(t){n[0]===this&&(r=t)}),o[0].selectedIndex=r,o.data("prevalue",d.html()),"undefined"!=typeof i.createEvent){var l=i.createEvent("HTMLEvents");l.initEvent("change",!0,!0),o[0].dispatchEvent(l)}else o[0].fireEvent("onchange")}}),t(e).on("keydown",function(e){var n=(i.activeElement,Foundation.libs.forms),s=t(".custom.dropdown.open");if(s.length>0){if(e.preventDefault(),13===e.which&&s.find("li.selected").trigger("click"),27===e.which&&s.removeClass("open"),e.which>=65&&e.which<=90){var a=n.go_to(s,e.which),o=s.find("li.selected");a&&(o.removeClass("selected"),n.scrollTo(a.addClass("selected"),300))}if(38===e.which){var o=s.find("li.selected"),r=o.prev(":not(.disabled)");r.length>0&&(r.parent()[0].scrollTop=r.parent().scrollTop()-n.outerHeight(r),o.removeClass("selected"),r.addClass("selected"))}else if(40===e.which){var o=s.find("li.selected"),a=o.next(":not(.disabled)");a.length>0&&(a.parent()[0].scrollTop=a.parent().scrollTop()+n.outerHeight(a),o.removeClass("selected"),a.addClass("selected"))}}}),this.settings.init=!0},go_to:function(t,e){var i=t.find("li"),n=i.length;if(n>0)for(var s=0;n>s;s++){var a=i.eq(s).text().charAt(0).toLowerCase();if(a===String.fromCharCode(e).toLowerCase())return i.eq(s)}},scrollTo:function(t,e){if(!(0>e)){var i=t.parent(),n=this.outerHeight(t),s=n*t.index()-i.scrollTop(),a=10*(s/e);this.scrollToTimerCache=setTimeout(function(){isNaN(parseInt(a,10))||(i[0].scrollTop=i.scrollTop()+a,this.scrollTo(t,e-10))}.bind(this),10)}},append_custom_markup:function(e,i){var n=t(i),s=n.attr("type"),a=n.next("span.custom."+s);n.parent().hasClass("switch")||n.addClass("hidden-field"),0===a.length&&(a=t('<span class="custom '+s+'"></span>').insertAfter(n)),a.toggleClass("checked",n.is(":checked")),a.toggleClass("disabled",n.is(":disabled"))},append_custom_select:function(e,i){var n,s=Foundation.libs.forms,a=t(i),o=a.next("div.custom.dropdown"),r=o.find("ul"),d=(o.find(".current"),o.find(".selector")),l=a.find("option"),c=l.filter(":selected"),u=a.attr("class")?a.attr("class").split(" "):[],h=0,f="",p=!1;if(0===o.length){var g=a.hasClass("small")?"small":a.hasClass("medium")?"medium":a.hasClass("large")?"large":a.hasClass("expand")?"expand":"";o=t('<div class="'+["custom","dropdown",g].concat(u).filter(function(t,e,i){return""===t?!1:i.indexOf(t)===e}).join(" ")+'"><a href="#" class="selector"></a><ul /></div>'),d=o.find(".selector"),r=o.find("ul"),f=l.map(function(){var e=t(this).attr("class")?t(this).attr("class"):"";return"<li class='"+e+"'>"+t(this).html()+"</li>"}).get().join(""),r.append(f),p=o.prepend('<a href="#" class="current">'+c.html()+"</a>").find(".current"),a.after(o).addClass("hidden-field")}else f=l.map(function(){return"<li>"+t(this).html()+"</li>"}).get().join(""),r.html("").append(f);if(s.assign_id(a,o),o.toggleClass("disabled",a.is(":disabled")),n=r.find("li"),s.cache[o.data("id")]=n.length,l.each(function(e){this.selected&&(n.eq(e).addClass("selected"),p&&p.html(t(this).html())),t(this).is(":disabled")&&n.eq(e).addClass("disabled")}),!o.is(".small, .medium, .large, .expand")){o.addClass("open");var s=Foundation.libs.forms;s.hidden_fix.adjust(r),h=s.outerWidth(n)>h?s.outerWidth(n):h,Foundation.libs.forms.hidden_fix.reset(),o.removeClass("open")}},assign_id:function(t,e){var i=[+new Date,Foundation.random_str(5)].join("-");t.attr("data-id",i),e.attr("data-id",i)},refresh_custom_select:function(e,i){var n=this,s=0,a=e.next(),o=e.find("option"),r=a.find("li");(r.length!==this.cache[a.data("id")]||i)&&(a.find("ul").html(""),o.each(function(){var e=t("<li>"+t(this).html()+"</li>");a.find("ul").append(e)}),o.each(function(e){this.selected&&(a.find("li").eq(e).addClass("selected"),a.find(".current").html(t(this).html())),t(this).is(":disabled")&&a.find("li").eq(e).addClass("disabled")}),a.removeAttr("style").find("ul").removeAttr("style"),a.find("li").each(function(){a.addClass("open"),n.outerWidth(t(this))>s&&(s=n.outerWidth(t(this))),a.removeClass("open")}),r=a.find("li"),this.cache[a.data("id")]=r.length)},toggle_checkbox:function(t){var e=t.prev(),i=e[0];!1===e.is(":disabled")&&(i.checked=i.checked?!1:!0,t.toggleClass("checked"),e.trigger("change"))},toggle_radio:function(t){var e=t.prev(),i=e.closest("form.custom"),n=e[0];!1===e.is(":disabled")&&(i.find('input[type="radio"][name="'+this.escape(e.attr("name"))+'"]').next().not(t).removeClass("checked"),t.hasClass("checked")||t.toggleClass("checked"),n.checked=t.hasClass("checked"),e.trigger("change"))},escape:function(t){return t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):""},hidden_fix:{tmp:[],hidden:null,adjust:function(e){var i=this;i.hidden=e.parents(),i.hidden=i.hidden.add(e).filter(":hidden"),i.hidden.each(function(){var e=t(this);i.tmp.push(e.attr("style")),e.css({visibility:"hidden",display:"block"})})},reset:function(){var e=this;e.hidden.each(function(i){var s=t(this),a=e.tmp[i];a===n?s.removeAttr("style"):s.attr("style",a)}),e.tmp=[],e.hidden=null}},off:function(){t(this.scope).off(".fndtn.forms")},reflow:function(){}};var s=function(e,i){for(var e=e.prev();e.length;){if(e.is(i))return e;e=e.prev()}return t()}}(Foundation.zj,this,this.document);