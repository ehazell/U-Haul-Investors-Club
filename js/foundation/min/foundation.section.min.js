!function(t,e,i){"use strict";Foundation.libs.section={name:"section",version:"4.3.1",settings:{deep_linking:!1,small_breakpoint:768,one_up:!0,section_selector:"[data-section]",region_selector:"section, .section, [data-section-region]",title_selector:".title, [data-section-title]",resized_data_attr:"data-section-resized",small_style_data_attr:"data-section-small-style",content_selector:".content, [data-section-content]",nav_selector:'[data-section="vertical-nav"], [data-section="horizontal-nav"]',active_class:"active",callback:function(){}},init:function(e,i,s){var n=this;return Foundation.inherit(this,"throttle data_options position_right offset_right"),"object"==typeof i&&t.extend(!0,n.settings,i),"string"!=typeof i?(this.events(),!0):this[i].call(this,s)},events:function(){for(var s=this,n=[],o=s.settings.section_selector,a=s.settings.region_selector.split(","),r=s.settings.title_selector.split(","),l=0,c=a.length;c>l;l++)for(var d=a[l],h=0,u=r.length;u>h;h++){var f=o+">"+d+">"+r[h];n.push(f+" a"),n.push(f)}t(s.scope).on("click.fndtn.section",n.join(","),function(e){var i=t(this).closest(s.settings.title_selector);s.close_navs(i),i.siblings(s.settings.content_selector).length>0&&s.toggle_active.call(i[0],e)}),t(e).on("resize.fndtn.section",s.throttle(function(){s.resize()},30)).on("hashchange.fndtn.section",s.set_active_from_hash),t(i).on("click.fndtn.section",function(e){e.isPropagationStopped&&e.isPropagationStopped()||e.target!==i&&s.close_navs(t(e.target).closest(s.settings.title_selector))}),t(e).triggerHandler("resize.fndtn.section"),t(e).triggerHandler("hashchange.fndtn.section")},close_navs:function(e){var i=Foundation.libs.section,s=t(i.settings.nav_selector).filter(function(){return!t.extend({},i.settings,i.data_options(t(this))).one_up});if(e.length>0){var n=e.parent().parent();(i.is_horizontal_nav(n)||i.is_vertical_nav(n))&&(s=s.filter(function(){return this!==n[0]}))}s.children(i.settings.region_selector).removeClass(i.settings.active_class)},toggle_active:function(e){var i=t(this),s=Foundation.libs.section,n=i.parent(),o=i.siblings(s.settings.content_selector),a=n.parent(),r=t.extend({},s.settings,s.data_options(a)),l=a.children(s.settings.region_selector).filter("."+s.settings.active_class);!r.deep_linking&&o.length>0&&e.preventDefault(),e.stopPropagation(),n.hasClass(s.settings.active_class)?!r.one_up&&(s.small(a)||s.is_vertical_nav(a)||s.is_horizontal_nav(a)||s.is_accordion(a))&&n.removeClass(s.settings.active_class):(l.removeClass(s.settings.active_class),n.addClass(s.settings.active_class),s.resize(n.find(s.settings.section_selector).not("["+s.settings.resized_data_attr+"]"),!0)),r.callback(a)},check_resize_timer:null,resize:function(e,s){var n=Foundation.libs.section,o=n.small(t(i)),a=function(t,e){return!(n.is_accordion(t)||t.is("["+n.settings.resized_data_attr+"]")||o&&!n.is_horizontal_tabs(t)||e!==("none"===t.css("display")||!t.parent().is(":visible")))};e=e||t(n.settings.section_selector),clearTimeout(n.check_resize_timer),o||e.removeAttr(n.settings.small_style_data_attr),e.filter(function(){return a(t(this),!1)}).each(function(){var e=t(this),i=e.children(n.settings.region_selector),o=i.children(n.settings.title_selector),a=i.children(n.settings.content_selector),r=0;if(s&&0==e.children(n.settings.region_selector).filter("."+n.settings.active_class).length){var l=t.extend({},n.settings,n.data_options(e));l.deep_linking||!l.one_up&&(n.is_horizontal_nav(e)||n.is_vertical_nav(e)||n.is_accordion(e))||i.filter(":visible").first().addClass(n.settings.active_class)}if(n.is_horizontal_tabs(e)||n.is_auto(e)){var c=0;o.each(function(){var e=t(this);if(e.is(":visible")){e.css(n.rtl?"right":"left",c);var i=parseInt(e.css("border-"+(n.rtl?"left":"right")+"-width"),10);"Nan"===i.toString()&&(i=0),c+=n.outerWidth(e)-i,r=Math.max(r,n.outerHeight(e))}}),o.css("height",r),i.each(function(){var e=t(this),i=e.children(n.settings.content_selector),s=parseInt(i.css("border-top-width"),10);"Nan"===s.toString()&&(s=0),e.css("padding-top",r-s)}),e.css("min-height",r)}else if(n.is_horizontal_nav(e)){var d=!0;o.each(function(){r=Math.max(r,n.outerHeight(t(this)))}),i.each(function(){var i=t(this);i.css("margin-left","-"+(d?e:i.children(n.settings.title_selector)).css("border-left-width")),d=!1}),i.css("margin-top","-"+e.css("border-top-width")),o.css("height",r),a.css("top",r),e.css("min-height",r)}else if(n.is_vertical_tabs(e)){var h=0;o.each(function(){var e=t(this);if(e.is(":visible")){e.css("top",h);var i=parseInt(e.css("border-top-width"),10);"Nan"===i.toString()&&(i=0),h+=n.outerHeight(e)-i}}),a.css("min-height",h+1)}else if(n.is_vertical_nav(e)){var u=0,f=!0;o.each(function(){u=Math.max(u,n.outerWidth(t(this)))}),i.each(function(){var i=t(this);i.css("margin-top","-"+(f?e:i.children(n.settings.title_selector)).css("border-top-width")),f=!1}),o.css("width",u),a.css(n.rtl?"right":"left",u),e.css("width",u)}e.attr(n.settings.resized_data_attr,!0)}),t(n.settings.section_selector).filter(function(){return a(t(this),!0)}).length>0&&(n.check_resize_timer=setTimeout(function(){n.resize(e.filter(function(){return a(t(this),!1)}),!0)},700)),o&&e.attr(n.settings.small_style_data_attr,!0)},is_vertical_nav:function(t){return/vertical-nav/i.test(t.data("section"))},is_horizontal_nav:function(t){return/horizontal-nav/i.test(t.data("section"))},is_accordion:function(t){return/accordion/i.test(t.data("section"))},is_horizontal_tabs:function(t){return/^tabs$/i.test(t.data("section"))},is_vertical_tabs:function(t){return/vertical-tabs/i.test(t.data("section"))},is_auto:function(t){var e=t.data("section");return""===e||/auto/i.test(e)},set_active_from_hash:function(){var i=Foundation.libs.section,s=e.location.hash.substring(1),n=t(i.settings.section_selector);n.each(function(){var e=t(this),n=t.extend({},i.settings,i.data_options(e)),o=e.children(i.settings.region_selector),a=n.deep_linking&&s.length>0,r=!1;o.each(function(){var e=t(this);if(r)e.removeClass(i.settings.active_class);else if(a){var n=e.children(i.settings.content_selector).data("slug");n&&new RegExp(n,"i").test(s)?(e.hasClass(i.settings.active_class)||e.addClass(i.settings.active_class),r=!0):e.removeClass(i.settings.active_class)}else e.hasClass(i.settings.active_class)&&(r=!0)}),r||n.deep_linking||!n.one_up&&(i.is_horizontal_nav(e)||i.is_vertical_nav(e)||i.is_accordion(e))||o.filter(":visible").first().addClass(i.settings.active_class)})},reflow:function(){var e=Foundation.libs.section;t(e.settings.section_selector).removeAttr(e.settings.resized_data_attr),e.throttle(function(){e.resize()},30)()},small:function(e){var i=t.extend({},this.settings,this.data_options(e));return this.is_horizontal_tabs(e)?!1:e&&this.is_accordion(e)?!0:t("html").hasClass("lt-ie9")?!0:t("html").hasClass("ie8compat")?!0:t(this.scope).width()<i.small_breakpoint},off:function(){t(this.scope).off(".fndtn.section"),t(e).off(".fndtn.section"),t(i).off(".fndtn.section")}},t.fn.reflow_section=function(t){var e=this,i=Foundation.libs.section;return e.removeAttr(i.settings.resized_data_attr),i.throttle(function(){i.resize(e,t)},30)(),this}}(Foundation.zj,window,document);